"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}function _toConsumableArray(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}(),_Point=require("./Point"),_Point2=_interopRequireDefault(_Point),_Line=require("./Line"),_Line2=_interopRequireDefault(_Line),_Size=require("./Size"),_Size2=_interopRequireDefault(_Size),prop=function(t){return function(n){return n[t]}},Box=function(){function t(n,e){_classCallCheck(this,t),Object.assign(this,{origin:n,size:e})}return _createClass(t,[{key:"corners",value:function(){var t=this.origin,n=t.add(new _Point2["default"](this.width,0)),e=n.add(new _Point2["default"](0,this.height)),i=t.add(new _Point2["default"](0,this.height));return[t,n,e,i]}},{key:"pad",value:function(n){return new t(this.origin.add(new _Point2["default"](-n,-n)),this.size.add(new _Size2["default"](n,n)))}},{key:"edges",value:function(){return this.corners().reduce(function(t,n,e,i){return t.last?(t.push(new _Line2["default"](t.last,n)),e===i.length-1&&t.push(new _Line2["default"](n,i[0])),t):(t.last=n,t)},[])}},{key:"contains",value:function(t){return this.x<=t.x&&t.x<=this.x+this.width&&this.y<=t.y&&t.y<=this.y+this.height}},{key:"toPairs",value:function(){return[this.origin.x,this.origin.y,this.size.width,this.size.height]}},{key:"x",get:function(){return this.origin.x}},{key:"y",get:function(){return this.origin.y}},{key:"width",get:function(){return this.size.width}},{key:"height",get:function(){return this.size.height}},{key:"center",get:function(){return this.origin.add(new _Point2["default"](this.size.width/2,this.size.height/2))}},{key:"bound",get:function(){return this.origin.add(new _Point2["default"](this.size.width,this.size.height))}},{key:"crosshair",get:function(){var t=this.center;return[new _Line2["default"](new _Point2["default"](-(1/0),t.y),new _Point2["default"](1/0,t.y)),new _Line2["default"](new _Point2["default"](t.x,-(1/0)),new _Point2["default"](t.x,1/0))]}},{key:"overlaps",get:function(){var t=this;return function(n){var e=t.origin,i=t.bound,r=n.origin,o=n.bound;return!(i.y<r.y||e.y>o.y||i.x<r.x||e.x>o.x)}}}],[{key:"bound",value:function(n){var e=n.map(prop("origin")),i=n.map(prop("bound")),r={x:e.map(prop("x")),y:e.map(prop("y"))},o={x:i.map(prop("x")),y:i.map(prop("y"))},a=Math.min.apply(Math,_toConsumableArray(r.x)),s=Math.min.apply(Math,_toConsumableArray(r.y)),u=Math.max.apply(Math,_toConsumableArray(o.x))-a,h=Math.max.apply(Math,_toConsumableArray(o.y))-s;return t.fromPairs(a,s,u,h)}},{key:"fromPairs",value:function(n,e,i,r){return new t(new _Point2["default"](n,e),new _Size2["default"](i,r))}}]),t}();exports["default"]=Box,module.exports=exports["default"],Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}(),_Point=require("./Point"),_Point2=_interopRequireDefault(_Point),_Size=require("./Size"),_Size2=_interopRequireDefault(_Size),_Box=require("./Box"),_Box2=_interopRequireDefault(_Box),Line=function(){function t(n,e){_classCallCheck(this,t),Object.assign(this,{origin:n,destination:e}),this._svgTpl=function(t,n){return"M "+t.x+" "+t.y+" L "+n.x+" "+n.y}}return _createClass(t,[{key:"from",value:function(n){return new t(n,this.destination)}},{key:"to",value:function(n){return new t(this.origin,n)}},{key:"add",value:function(n){return new t(this.origin.add(n),this.destination.add(n))}},{key:"crosses",value:function(t){var n=(this.origin.y-t.origin.y)*(t.destination.x-t.origin.x)-(this.origin.x-t.origin.x)*(t.destination.y-t.origin.y),e=(this.destination.x-this.origin.x)*(t.destination.y-t.origin.y)-(this.destination.y-this.origin.y)*(t.destination.x-t.origin.x);if(0===e)return!1;var i=n/e;n=(this.origin.y-t.origin.y)*(this.destination.x-this.origin.x)-(this.origin.x-t.origin.x)*(this.destination.y-this.origin.y);var r=n/e;return!(0>i||i>1||0>r||r>1)}},{key:"intersection",value:function(t){var n,e,i,r,o;return n=(t.destination.y-t.origin.y)*(this.destination.x-this.origin.x)-(t.destination.x-t.origin.x)*(this.destination.y-this.origin.y),0===n?null:(e=this.origin.y-t.origin.y,i=this.origin.x-t.origin.x,r=(t.destination.x-t.origin.x)*e-(t.destination.y-t.origin.y)*i,o=(this.destination.x-this.origin.x)*e-(this.destination.y-this.origin.y)*i,e=r/n,i=o/n,e>0&&1>e&&i>0&&1>i?new _Point2["default"](this.origin.x+e*(this.destination.x-this.origin.x),this.origin.y+e*(this.destination.y-this.origin.y)):null)}},{key:"intersects",value:function(t){var n=this;return t.contains(this.origin)||t.contains(this.destination)||t.edges().map(function(t){return t.crosses(n)}).indexOf(!0)>=0}},{key:"bounds",value:function(){return new _Box2["default"](new _Point2["default"](Math.min(this.origin.x,this.destination.x),Math.min(this.origin.y,this.destination.y)),new _Size2["default"](Math.abs(this.origin.x-this.destination.x),Math.abs(this.origin.y-this.destination.y)))}},{key:"toStyle",value:function(){var t=this.origin.x,n=this.origin.y,e=this.destination.x,i=this.destination.y,r=Math.sqrt((t-e)*(t-e)+(n-i)*(n-i)),o=180*Math.atan2(i-n,e-t)/Math.PI,a="rotate("+o+"deg)";return{"-webkit-transform":a,"-moz-transform":a,transform:a,width:r,left:t,top:n}}},{key:"toPairs",value:function(){return[this.origin.x,this.origin.y,this.destination.x,this.destination.y]}},{key:"toJSON",value:function(){return{origin:this.origin,destination:this.destination}}},{key:"toSVG",value:function(){return this._svgTpl(this.origin,this.destination)}}],[{key:"fromPairs",value:function(n,e,i,r){return new t(new _Point2["default"](n,e),new _Point2["default"](i,r))}}]),t}();exports["default"]=Line,module.exports=exports["default"],Object.defineProperty(exports,"__esModule",{value:!0});var _bind=Function.prototype.bind,_createClass=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}(),Point=function(){function t(){var n=arguments.length<=0||void 0===arguments[0]?0:arguments[0],e=arguments.length<=1||void 0===arguments[1]?0:arguments[1];_classCallCheck(this,t),Object.freeze(Object.assign(this,{_x:n,_y:e}))}return _createClass(t,[{key:"add",value:function(n){var e=t.instance(n);return new t(this._x+e.x,this._y+e.y)}},{key:"subtract",value:function(n){return new t(this._x-n._x,this._y-n._y)}},{key:"product",value:function(t){return this._x*t._y-this._y*t._x}},{key:"equals",value:function(t){return this._x===t._x&&this._y===t._y}},{key:"invert",value:function(){return new t(-this._x,-this._y)}},{key:"distance",value:function(t){return Math.sqrt(Math.pow(t.x-this.x,2)+Math.pow(t.y-this.y,2))}},{key:"manhattanDistance",value:function(t){return Math.abs(t.x-this.x)+Math.abs(t.y-this.y)}},{key:"snapTo",value:function(n,e){return e=e||n,new t(n*Math.round(this.x/n),e*Math.round(this.y/e))}},{key:"theta",value:function(t){var n=-(t.y-this.y),e=t.x-this.x,i=10,r=0===n.toFixed(i)&&0===e.toFixed(i)?0:Math.atan2(n,e);return 180*(0>r?2*Math.PI+r:r)/Math.PI}},{key:"toJSON",value:function(){return{x:this._x,y:this._y}}},{key:"toString",value:function(){return this._x+", "+this._y}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"transform",get:function(){return"translate("+this._x+", "+this._y+")"}}],[{key:"instance",value:function(n,e){return n instanceof t?n:n&&n.hasOwnProperty("x")?new t(n.x,n.y):n&&n.length&&n.length>=2?new t(n[0],n[1]):new t(n,e)}},{key:"fromString",value:function(n){return new(_bind.apply(t,[null].concat(_toConsumableArray(n.split(",").map(function(t){return parseInt(t,10)})))))}}]),t}();exports["default"]=Point,module.exports=exports["default"],Object.defineProperty(exports,"__esModule",{value:!0});var _bind=Function.prototype.bind,_createClass=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}(),Size=function(){function t(n,e){_classCallCheck(this,t);var i=n,r=e;Object.assign(this,{_w:i,_h:r})}return _createClass(t,[{key:"add",value:function(n){return new t(this._w+n.width,this._h+n.height)}},{key:"toJSON",value:function(){return{width:this._w,height:this._h}}},{key:"width",get:function(){return this._w}},{key:"height",get:function(){return this._h}},{key:"transform",get:function(){return"scale("+this._w+", "+this._h+")"}}],[{key:"instance",value:function(n,e){return n&&n.hasOwnProperty("width")?new t(n.width,n.height):n&&n.length&&n.length>=2?new(_bind.apply(t,[null].concat(_toConsumableArray(n)))):new t(n,e)}}]),t}();exports["default"]=Size,module.exports=exports["default"];